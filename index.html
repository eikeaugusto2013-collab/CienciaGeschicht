<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Linha do Tempo Global</title>
<style>
  body { font-family: Arial, sans-serif; text-align:center; background:#f0f0f0; margin:0; padding:0;}
  h1 { background:#2196f3; color:white; padding:15px; margin:0; }
  #menu { margin:30px; }
  .idadeBtn { background:#4caf50; color:white; padding:12px 20px; border:none; border-radius:8px; margin:10px; cursor:pointer; font-size:16px; }
  .idadeBtn:hover { background:#43a047; }
  #jogo { display:none; margin:30px auto; max-width:700px; }
  #evento { font-size:20px; margin:20px 0; }
  .barra { position:relative; width:90%; height:10px; background:linear-gradient(to right,#4caf50,#2196f3); margin:40px auto; border-radius:5px; }
  #marcador { position:absolute; top:-8px; width:16px; height:26px; background:#ff9800; border-radius:4px; cursor:grab; }
  #resultado { font-size:18px; margin-top:20px; }
  button { background:#2196f3; color:white; padding:10px 20px; border:none; border-radius:10px; font-size:16px; margin:10px; cursor:pointer; }
  button:hover { background:#1976d2; }
  #entradaAno { padding:6px; font-size:16px; width:100px; text-align:center; margin-top:10px; }
  #pontuacao { font-size:18px; margin-top:15px; }
  #voltar { background:#f44336; }
  #voltar:hover { background:#d32f2f; }
</style>
</head>
<body>
<h1>Jogo da Linha do Tempo Global</h1>

<div id="menu">
  <h2>Escolha a Idade:</h2>
  <button class="idadeBtn" onclick="iniciar('antiga')">Idade Antiga (-4000 a 476)</button>
  <button class="idadeBtn" onclick="iniciar('media')">Idade MÃ©dia (476 - 1453)</button>
  <button class="idadeBtn" onclick="iniciar('moderna')">Idade Moderna (1453 - 1789)</button>
  <button class="idadeBtn" onclick="iniciar('contemporanea')">Idade ContemporÃ¢nea (1789 - 2025)</button>
</div>

<div id="jogo">
  <p id="evento">Carregando evento...</p>
  <div class="barra" id="barra">
    <div id="marcador"></div>
  </div>
  <input type="number" id="entradaAno" placeholder="Digite o ano">
  <p><strong>Ano estimado:</strong> <span id="anoEscolhido">0</span></p>
  <button id="botao">Confirmar</button>
  <button id="pular">PrÃ³ximo</button>
  <button id="voltar">Voltar ao Menu</button>
  <p id="resultado"></p>
  <p id="pontuacao">Pontos: 0</p>
</div>

<script>
// ====== BANCO DE 30 EVENTOS POR ERA (Secular) ======
const eventosPorIdade = {
  antiga: [
    { nome:"FundaÃ§Ã£o de Roma", ano:-753 }, { nome:"ConstruÃ§Ã£o das PirÃ¢mides do Egito", ano:-2560 },
    { nome:"InÃ­cio da civilizaÃ§Ã£o MesopotÃ¢mica", ano:-3100 }, { nome:"InÃ­cio da civilizaÃ§Ã£o Chinesa", ano:-2100 },
    { nome:"CÃ³digo de Hamurabi", ano:-1754 }, { nome:"Primeiras OlimpÃ­adas na GrÃ©cia", ano:-776 },
    { nome:"Guerras PÃºnicas", ano:-264 }, { nome:"Alexandre, o Grande inicia conquistas", ano:-336 },
    { nome:"Morte de Alexandre", ano:-323 }, { nome:"InÃ­cio da Dinastia Han na China", ano:-206 },
    { nome:"CriaÃ§Ã£o do Alfabeto Grego", ano:-800 }, { nome:"InÃ­cio do ImpÃ©rio Persa", ano:-550 },
    { nome:"Democracia Ateniense se consolida", ano:-508 }, { nome:"Batalha de Maratona", ano:-490 },
    { nome:"Batalha de TermÃ³pilas", ano:-480 }, { nome:"Fim da RepÃºblica Romana", ano:-27 },
    { nome:"InÃ­cio do ImpÃ©rio Romano", ano:-27 }, { nome:"DivisÃ£o do ImpÃ©rio Romano", ano:285 },
    { nome:"Ã‰dito de MilÃ£o (igualdade civil)", ano:313 }, { nome:"FundaÃ§Ã£o de Constantinopla", ano:330 },
    { nome:"InvasÃµes BÃ¡rbaras na Europa", ano:376 }, { nome:"Queda do ImpÃ©rio Romano do Ocidente", ano:476 },
    { nome:"InÃ­cio do Coliseu em Roma", ano:72 }, { nome:"InÃ­cio das Guerras MacedÃ´nicas", ano:-214 },
    { nome:"Fim do reinado de RamsÃ©s II", ano:-1213 }, { nome:"InÃ­cio do Reino de Israel", ano:-1020 },
    { nome:"InvenÃ§Ã£o da roda de oleiro", ano:-3500 }, { nome:"CriaÃ§Ã£o do calendÃ¡rio egÃ­pcio", ano:-2700 },
    { nome:"ExpansÃ£o do ImpÃ©rio AssÃ­rio", ano:-900 }, { nome:"Primeiras bibliotecas na MesopotÃ¢mia", ano:-700 }
  ],
  media: [
    { nome:"Queda do ImpÃ©rio Romano do Ocidente", ano:476 }, { nome:"InÃ­cio do ImpÃ©rio CarolÃ­ngio", ano:800 },
    { nome:"Primeira Cruzada", ano:1096 }, { nome:"Assinatura da Magna Carta", ano:1215 },
    { nome:"Peste Negra na Europa", ano:1347 }, { nome:"ConstruÃ§Ã£o da Catedral de Notre-Dame", ano:1163 },
    { nome:"Queda de Constantinopla", ano:1453 }, { nome:"Universidade de Oxford inicia atividades", ano:1096 },
    { nome:"InÃ­cio do Renascimento Italiano", ano:1300 }, { nome:"Fim da Reconquista na PenÃ­nsula IbÃ©rica", ano:1492 },
    { nome:"FundaÃ§Ã£o do ImpÃ©rio Mongol", ano:1206 }, { nome:"Batalha de Hastings", ano:1066 },
    { nome:"Primeira representaÃ§Ã£o teatral em Veneza", ano:1290 }, { nome:"InÃ­cio da dinastia Song na China", ano:960 },
    { nome:"FundaÃ§Ã£o de Timbuktu", ano:1100 }, { nome:"InÃ­cio da dinastia Capetiana na FranÃ§a", ano:987 },
    { nome:"ExpansÃ£o Viking na Europa", ano:793 }, { nome:"ConstruÃ§Ã£o da Catedral de Chartres", ano:1194 },
    { nome:"InÃ­cio da imprensa de Gutenberg", ano:1440 }, { nome:"FundaÃ§Ã£o de Moscou como capital", ano:1147 },
    { nome:"Reinado de Ricardo CoraÃ§Ã£o de LeÃ£o na Inglaterra", ano:1189 }, { nome:"InÃ­cio da dinastia Yuan na China", ano:1271 },
    { nome:"Reconquista de Toledo", ano:1085 }, { nome:"FundaÃ§Ã£o do Sacro ImpÃ©rio Romano-GermÃ¢nico", ano:962 },
    { nome:"CriaÃ§Ã£o do calendÃ¡rio juliano", ano:-46 }, { nome:"InÃ­cio da construÃ§Ã£o do Castelo de Windsor", ano:1070 },
    { nome:"InÃ­cio da Universidade de Bolonha", ano:1088 }, { nome:"ConstruÃ§Ã£o da Ponte de AlcÃ¢ntara", ano:104 }
  ],
  moderna: [
    { nome:"Descoberta da AmÃ©rica", ano:1492 }, { nome:"FundaÃ§Ã£o de Jamestown nos EUA", ano:1607 },
    { nome:"Guerra dos Trinta Anos", ano:1618 }, { nome:"IndependÃªncia dos EUA", ano:1776 },
    { nome:"InÃ­cio da RevoluÃ§Ã£o Francesa", ano:1789 }, { nome:"Tratado de Tordesilhas", ano:1494 },
    { nome:"InÃ­cio da colonizaÃ§Ã£o inglesa na AustrÃ¡lia", ano:1788 }, { nome:"FundaÃ§Ã£o de SÃ£o Petersburgo", ano:1703 },
    { nome:"InÃ­cio da Dinastia Qing na China", ano:1644 }, { nome:"Assinatura do Tratado de Utrecht", ano:1713 },
    { nome:"InÃ­cio do Iluminismo", ano:1685 }, { nome:"Guerra de SucessÃ£o Espanhola", ano:1701 },
    { nome:"RevoluÃ§Ã£o CientÃ­fica", ano:1543 }, { nome:"Companhia Holandesa das Ãndias Orientais", ano:1602 },
    { nome:"Primeiro voo de balÃ£o de ar quente", ano:1783 }, { nome:"Revolta de Tupac Amaru II no Peru", ano:1780 },
    { nome:"Primeira publicaÃ§Ã£o de Newton", ano:1687 }, { nome:"ColonizaÃ§Ã£o francesa na AmÃ©rica do Norte", ano:1608 },
    { nome:"ConstruÃ§Ã£o do PalÃ¡cio de Versalhes", ano:1661 }, { nome:"ColonizaÃ§Ã£o portuguesa no Brasil", ano:1500 },
    { nome:"Descoberta da passagem do Noroeste", ano:1497 }, { nome:"CircunavegaÃ§Ã£o de MagalhÃ£es", ano:1519 },
    { nome:"UnificaÃ§Ã£o do JapÃ£o (perÃ­odo Sengoku)", ano:1568 }, { nome:"FundaÃ§Ã£o da colÃ´nia de Nova AmsterdÃ£", ano:1624 },
    { nome:"Primeira mÃ¡quina a vapor de Watt", ano:1769 }, { nome:"CriaÃ§Ã£o do Banco da Inglaterra", ano:1694 },
    { nome:"InÃ­cio da RevoluÃ§Ã£o Industrial", ano:1760 }, { nome:"InÃ­cio da independÃªncia do Brasil", ano:1789 },
    { nome:"Guerra Anglo-Espanhola", ano:1585 }, { nome:"Reforma Inglesa (polÃ­tica)", ano:1534 }
  ],
  contemporanea: [
    { nome:"InÃ­cio da Primeira Guerra Mundial", ano:1914 }, { nome:"Fim da Primeira Guerra Mundial", ano:1918 },
    { nome:"InÃ­cio da Segunda Guerra Mundial", ano:1939 }, { nome:"Fim da Segunda Guerra Mundial", ano:1945 },
    { nome:"CriaÃ§Ã£o da ONU", ano:1945 }, { nome:"Chegada do homem Ã  Lua", ano:1969 },
    { nome:"Queda do Muro de Berlim", ano:1989 }, { nome:"Fim da UniÃ£o SoviÃ©tica", ano:1991 },
    { nome:"Ataques de 11 de setembro", ano:2001 }, { nome:"InÃ­cio da pandemia de COVID-19", ano:2020 },
    { nome:"CriaÃ§Ã£o da UniÃ£o Europeia", ano:1993 }, { nome:"CriaÃ§Ã£o do Euro", ano:1999 },
    { nome:"Primeiro voo do Concorde", ano:1969 }, { nome:"InÃ­cio da Guerra do VietnÃ£", ano:1955 },
    { nome:"Fim da Guerra do VietnÃ£", ano:1975 }, { nome:"RevoluÃ§Ã£o Chinesa (industrial/polÃ­tica)", ano:1949 },
    { nome:"InÃ­cio da Guerra do Iraque", ano:2003 }, { nome:"Fim da Guerra do Iraque", ano:2011 },
    { nome:"Primeira transmissÃ£o de TV", ano:1928 }, { nome:"Primeiro computador eletrÃ´nico", ano:1943 },
    { nome:"Primeiro satÃ©lite Sputnik", ano:1957 }, { nome:"Crise dos MÃ­sseis de Cuba", ano:1962 },
    { nome:"Primeira viagem transatlÃ¢ntica de aviÃ£o", ano:1919 }, { nome:"Assassinato de John F. Kennedy", ano:1963 },
    { nome:"Atentado de Oklahoma City", ano:1995 }, { nome:"Primeiro voo comercial de aviÃ£o a jato", ano:1952 },
    { nome:"Desembarque de Normandia", ano:1944 }, { nome:"Tratado de Versalhes", ano:1919 },
    { nome:"InÃ­cio do Apartheid na Ãfrica do Sul", ano:1948 }, { nome:"Fim do Apartheid na Ãfrica do Sul", ano:1994 }
  ]
};

// ====== VARIÃVEIS ======
let idadeSelecionada, eventos, eventoAtual, anoMin, anoMax;
let arrastando=false, pontos=0;

const barra=document.getElementById("barra");
const marcador=document.getElementById("marcador");
const anoEscolhido=document.getElementById("anoEscolhido");
const resultado=document.getElementById("resultado");
const botao=document.getElementById("botao");
const eventoTexto=document.getElementById("evento");
const pontuacao=document.getElementById("pontuacao");
const pular=document.getElementById("pular");
const voltar=document.getElementById("voltar");

// ====== INICIAR ======
function iniciar(idade){
  idadeSelecionada=idade;
  document.getElementById("menu").style.display="none";
  document.getElementById("jogo").style.display="block";

  if(idade==="antiga"){ anoMin=-4000; anoMax=476; }
  if(idade==="media"){ anoMin=476; anoMax=1453; }
  if(idade==="moderna"){ anoMin=1453; anoMax=1789; }
  if(idade==="contemporanea"){ anoMin=1789; anoMax=2025; }

  eventos=eventosPorIdade[idade].sort(()=>Math.random()-0.5).slice(0,10);
  pontos=0; pontuacao.textContent=`Pontos: ${pontos}`;
  novoEvento();
}

// ====== NOVO EVENTO ======
function novoEvento(){
  resultado.textContent="";
  eventoAtual=eventos.pop();
  if(!eventoAtual){
    eventoTexto.textContent=`Fim do jogo! PontuaÃ§Ã£o final: ${pontos}`;
    document.getElementById("barra").style.display="none";
    document.getElementById("botao").style.display="none";
    document.getElementById("pular").style.display="none";
    document.getElementById("entradaAno").style.display="none";
    return;
  }
  eventoTexto.textContent=`Em que ano aconteceu: ${eventoAtual.nome}?`;
  setMarcador((barra.offsetWidth-marcador.offsetWidth)/2);
}

// ====== MARCADOR CORRIGIDO ======
function setMarcador(pos){
  const largura = barra.offsetWidth - marcador.offsetWidth;
  const posLimit = Math.max(0, Math.min(largura, pos)); // travar dentro da barra
  marcador.style.left = posLimit + "px";

  let proporcao = posLimit / largura;
  let ano = Math.round(anoMin + proporcao*(anoMax-anoMin));

  // travar ano nos limites
  if(ano < anoMin) ano = anoMin;
  if(ano > anoMax) ano = anoMax;

  anoEscolhido.textContent = ano;
}

marcador.addEventListener("mousedown",()=>arrastando=true);
document.addEventListener("mouseup",()=>arrastando=false);
document.addEventListener("mousemove",e=>{
  if(!arrastando) return;
  const rect=barra.getBoundingClientRect();
  const pos=e.clientX-rect.left;
  setMarcador(pos);
});

// ====== ENTRADA MANUAL ======
document.getElementById("entradaAno").addEventListener("input",e=>{
  let valor=parseInt(e.target.value);
  if(isNaN(valor)) return;
  if(valor<anoMin) valor=anoMin;
  if(valor>anoMax) valor=anoMax;
  const largura=barra.offsetWidth-marcador.offsetWidth;
  const proporcao=(valor-anoMin)/(anoMax-anoMin);
  setMarcador(proporcao*largura);
});

// ====== BOTÃ•ES ======
botao.addEventListener("click",()=>{
  const escolhido=parseInt(anoEscolhido.textContent);
  const diferenca=Math.abs(escolhido-eventoAtual.ano);
  if(diferenca===0){ resultado.textContent=`ðŸŽ¯ Perfeito! Era ${eventoAtual.ano}. +3 pontos!`; pontos+=3; }
  else if(diferenca<=5){ resultado.textContent=`ðŸ‘ Quase! Era ${eventoAtual.ano}. (Dif ${diferenca}) +2 pontos.`; pontos+=2; }
  else if(diferenca<=20){ resultado.textContent=`ðŸ‘ Foi em ${eventoAtual.ano}. (Dif ${diferenca}) +1 ponto.`; pontos+=1; }
  else{ resultado.textContent=`âŒ Errou! O certo era ${eventoAtual.ano}.`; }
  pontuacao.textContent=`Pontos: ${pontos}`;
});

pular.addEventListener("click",novoEvento);

voltar.addEventListener("click",()=>{
  document.getElementById("jogo").style.display="none";
  document.getElementById("menu").style.display="block";
  document.getElementById("barra").style.display="block";
  document.getElementById("botao").style.display="inline-block";
  document.getElementById("pular").style.display="inline-block";
  document.getElementById("entradaAno").style.display="inline-block";
});
</script>
</body>
</html>
